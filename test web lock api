ุฎู ุนุงูู ฺฉู ููุงุฑุฏ ฑ ุชุง ณ ุฑู ุจุฑุฑุณ ฺฉุฑุฏ ู ฺฏูุช ฺฉู ุฑุนุงุช ุดุฏู. ุงูฺฉู **ูุดฺฉู ููุท ุฏุฑ ฺฉ ุชุจ ู ุฏุฑ ูุญุท ูุงูุน (production)** ุฑุฎ ูโุฏู ูุดูู ูโุฏู ฺฉู Web Locks API ููฺฉูู ุฏุฑ ุงูู ูุญุท **ุบุฑูุนุงู** ุจุงุดู ุง **ุฑูุชุงุฑ ูุชูุงูุช ุฏุงุดุชู ุจุงุดู**.

ุญุงูุง ุจุฑู ุณุฑุงุบ **ฺฏุฒูู ด** (ูุญุท deployment ู CDNูุง) ู ุงูู ุฑู ุฏููโุชุฑ ุจุฑุฑุณ ฺฉูู:

---

## โ ููุฑุฏ ด: ูุญุท deploy ู ุชุงุซุฑุด ุฑู Web Locks API

### ๐ ููุถูุน ฺูุ

ุจุฑุฎ ูุญุทโูุง ุงุณุชูุฑุงุฑ (CDNุ reverse proxyุ ุณุฑูุณโูุง ูุงุณุช ูุซู Vercelุ Netlifyุ Cloudflare Pagesุ Azure Static Web Apps ู ...) ููฺฉูู ุจุงุนุซ ุจุดู:

* ุตูุญู ุดูุง ุฏุฑ **Secure Context ูุงูุน** ุงุฌุฑุง ูุดู.
* ุง ุฑูุชุงุฑ ุจุฑุฎ Web API ูุง ูุซู `navigator.locks` ุบุฑูุนุงู ุจุดู ุง ุบุฑูุงุจู ูพุดโุจู ุจุดู.
* ุง ุชูุธูุงุช `Content-Security-Policy (CSP)` ุง `Sandboxing` ุจุงุนุซ ูุญุฏูุฏ ุดุฏู APIูุง ุจุดู.

---

## ๐งช ุชุณุช ุนูู ุจุฑุง ุงู ูุฑุถู:

ุฏุฑ ูุญุท production (ุฑู ูุฑูุฑฺฏุฑ ฺฉูุงูุช)ุ ุฏุฑ DevTools Consoleุ ุงู ุฏู ููุฑุฏ ุฑู ุจุฑุฑุณ ฺฉู:

### 1. ุขุง `navigator.locks` ูุฌูุฏ ุฏุงุฑุฏุ

```js
console.log(navigator.locks);  // ุจุงุฏ ฺฉ Object ุจุงุดุฏุ ูู undefined
```

> ุงฺฏุฑ `undefined` ุจูุฏุ ุนู ูุฑูุฑฺฏุฑ (ุฏุฑ ุงูู ฺฉุงูุชฺฉุณุช) Web Locks API ุฑู ุบุฑูุนุงู ฺฉุฑุฏู.

---

### 2. ุชุณุช ูุณุชูู ููู:

```js
navigator.locks.request('test-lock', async () => {
  console.log('Web Locks API works!');
});
```

> ุงฺฏุฑ ุงู ูพุงู ุฏุฑ Console ฺุงูพ ูุดุฏ ุง ุฎุทุง ุฏุฑุงูุช ุดุฏุ ูุดุฎุต ูโุดู ฺฉู API ุบุฑูุนุงูู ุง sandbox ุดุฏู.

---

### 3. ุจุฑุฑุณ Secure Context:

ุฏุฑ ููุงู ุชุจุ ุฏุฑ DevTools Console ุจุฒู:

```js
console.log(window.isSecureContext); // ุจุงุฏ true ุจุงุดุฏ
```

> ุงฺฏุฑ false ุจุงุดูุ ุนู ูุฑูุฑฺฏุฑ ุตูุญู ุฑู ุฏุฑ ฺฉ ฺฉุงูุชฺฉุณุช ุบุฑุงูู ุงุฌุฑุง ฺฉุฑุฏู (ูุซูุงู ุฏุงุฎู ฺฉ iframe sandbox ุดุฏู ุง ุงุฒ ูพุฑูฺฉุณ ูุงููุงููฺฏ ุฑุฏ ุดุฏู).

---

## ๐ ุฏูุงู ุฑุงุฌ ุบุฑูุนุงู ุดุฏู Web Locks API ุฏุฑ ูุญุท production

### โด๏ธ Content-Security-Policy ูุญุฏูุฏฺฉููุฏู

ุงฺฏุฑ CSP ูุฏุฑูุง ุจูโุดุฏุช ูุญุฏูุฏฺฉููุฏู ุจุงุดูุฏุ ููฺฉูู ุจุนุถ APIูุง ุบุฑูุงุจู ุงุณุชูุงุฏู ุจุดู.

ูุซูุงู:

```
Content-Security-Policy: default-src 'self'; script-src 'self'; object-src 'none'; ...
```

**ุฑุงูฺฉุงุฑ:** ุจุฑุฑุณ response header ุฏุฑ DevTools โ Network โ \[ูุงู HTML ุงุตู] โ ุชุจ Headers.

---

### โด๏ธ ุงุณุชูุงุฏู ุงุฒ iframe ุง ูพูุชูุฑูโูุง ฺฉู sandbox ุงุนูุงู ูโฺฉูู

ูุซูุงู ุงฺฏุฑ ุณุงุช ุฏุฑ ฺฉ iframe ุงุฒ ุฏุงููู ุฏฺฏุฑ ุจุงุฑฺฏุฐุงุฑ ุดุฏู ุจุงุดู (ุง ุญุช ุชุจูุบุงุชุ ุจุฎุดโูุง auth ูุซู login via Microsoft ฺฉู ุฏุฑ iframe ูุงุฏ)ุ Web Locks API ุบุฑูุนุงู ูโุดู.

---

### โด๏ธ CDN ุง reverse proxy ุฎุงุต (ูุซูุงู Cloudflare)

ุจุฑุฎ ุงุฒ ุงู ุณุฑูุณโูุง (ุฏุฑ ุดุฑุงุท ุฎุงุต ุง ุจุง ุชูุธูุงุช ุฎุงุต) ููฺฉูู ูุญุชูุง ุฑู ุฏุฑ ุญุงูุช "ุณุฑูุฑ side rendering + caching" ุง ุจุง ุชุบุฑ ุฏุฑ context ุงุฌุฑุง ฺฉูู.

ุจุฑุง ุชุณุชุ ู ูุณุฎู ุบุฑ CDN (ูุณุชูู ุงุฒ ุณุฑูุฑ ุงุตู) ุฑู ุจุงุฑฺฏุฐุงุฑ ฺฉู ู ุจุจู Web Locks API ฺฉุงุฑ ูโฺฉูู ุง ูู.

---

## ๐งฐ ูพุดููุงุฏ ุฑุงูฺฉุงุฑ:

ุงฺฏุฑ ุงุญุชูุงู ูโุฏ ฺฉู Web Locks API ุชู ูุญุท production ุบุฑูุนุงูู ุง ุบุฑูุงุจู ุงุนุชูุงุฏ ูุณุชุ ูโุชูู fallback ุจุฒุงุฑ:

```js
const hasLockAPI = !!(navigator.locks && navigator.locks.request);

async function withRefreshLock(callback) {
  if (hasLockAPI) {
    return navigator.locks.request('refresh-token', callback);
  } else {
    // fallback ุณุงุฏู ุจู Promise lock ุฏุฑ ุณุทุญ global
    if (window._refreshLock) {
      await window._refreshLock;
      return;
    }

    const promise = callback();
    window._refreshLock = promise;
    try {
      return await promise;
    } finally {
      window._refreshLock = null;
    }
  }
}
```

---

## โ ุฌูุนโุจูุฏ

| ููุฑุฏ                              | ุจุฑุฑุณ ฺฉู                                       |
| --------------------------------- | ---------------------------------------------- |
| ุขุง Web Locks API ุบุฑูุนุงููุ       | `navigator.locks` ุฏุฑ DevTools                  |
| ุขุง ฺฉุงูุชฺฉุณุช ุงูู ูุณุชุ              | `window.isSecureContext` ุจุงุฏ `true` ุจุงุดู      |
| ุขุง CSP ูุงูุน ุงุณุชูุงุฏู ูโุดูุ       | ุจุฑุฑุณ ูุฏุฑูุง ุฏุฑ ุชุจ Network                      |
| ุงุฒ CDN/ูพุฑูฺฉุณ ุฎุงุต ุงุณุชูุงุฏู ูโฺฉูุ | ุจุฑุฑุณ ุจุง ูุณุฎู ุจุฏูู CDN ุง ุบุฑูุดุฑุฏูโุดุฏู         |
| ุฑุงูโุญู ุฌุงฺฏุฒู                    | ูพุงุฏูโุณุงุฒ fallback ุฏุฑ ุตูุฑุช ูุจูุฏ Web Locks API |

---

ุงฺฏู ุฎูุงุณุชุ ูโุชูู URL ุชุณุช (ุง ุจุฎุด ุงุฒ ฺฉุฏ frontend deployment) ุฑู ูู ุจุฏ ุชุง ุจุดุชุฑ ุจุฑุฑุณ ฺฉูู.


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



ุจุณุงุฑ ุฎูุจ. ุงู ุฏู ููุถูุนโุนู ูุฏุฑูุง ุงููุช ุฏุฑ .NET ู ูุญุฏูุฏุชโูุง ุณุงุฒูุงูโุงุฒ ุฌููู ุนูุงูู ูพููุงู ู ุบุฑูุณุชูู ูุณุชูุฏ ฺฉู ููฺฉูู ุจุงุนุซ ุงุฎุชูุงู ุฏุฑ **Web Locks API** ุง ุฏฺฏุฑ APIูุง ูุฑูุฑฺฏุฑ ุจุดูุ ุญุช ููุช ุธุงูุฑ ุณุงุช ุฏุฑุณุช ฺฉุงุฑ ูโฺฉูู. ุฏุฑ ุงุฏุงููุ ูุฑ ุฏู ููุฑุฏ ุฑู ุฏูู ู ุจุง ูุซุงู ุชูุถุญ ูโุฏู:

---

## โ ฑ.ณ. ุฑูุชุงุฑูุง ุงููุช HTTP Headerูุง ุฏุฑ .NET

ุฏุฑ ูพุฑูฺูโูุง .NET (ูุฎุตูุตุงู ASP.NET Core)ุ ูโุดู ุงุฒ ุทุฑู Middleware ุง ุชูุธูุงุช IISุ ูุฏุฑูุง ุงููุช ูุฎุชูู ุจู ูพุงุณุฎโูุง HTTP ุงุถุงูู ฺฉุฑุฏ. ุจุนุถ ุงุฒ ุงู Headerูุง ูโุชููู ุจุงุนุซ ุจุดู **ุฏุณุชุฑุณ ุจู Web Locks API ุง ุณุงุฑ APIูุง ูุจ ุบุฑูุนุงู ุง ูุญุฏูุฏ ุจุดู**.

### ๐ ูููโุชุฑู ูุฏุฑูุง ูุคุซุฑ:

---

### ๐ธ `Permissions-Policy` (ูุจูุงู Feature-Policy)

ุงู ูุฏุฑ **ุงุฌุงุฒู ุง ููุน ุงุณุชูุงุฏู ุงุฒ ูุงุจูุชโูุง ุฎุงุต ูุฑูุฑฺฏุฑ** ุฑู ฺฉูุชุฑู ูโฺฉููุ ุงุฒ ุฌููู Web Locks:

```http
Permissions-Policy: lock-manager=()
```

โ๏ธ ุงู ุฎุท ุนู: ูฺ ูุจุฏุงุฆ (origin) ุงุฌุงุฒู ุงุณุชูุงุฏู ุงุฒ Web Locks API ุฑู ูุฏุงุฑู. ุฏุฑ ูุชุฌู `navigator.locks` ุฏุฑ ูุฑูุฑฺฏุฑ **undefined** ุฎูุงูุฏ ุจูุฏ.

โ ูุณุฎู ูุฌุงุฒุด ูโุชููู ุงู ุจุงุดู:

```http
Permissions-Policy: lock-manager=(self)
```

ุง ุญุฐู ฺฉุงูู ุงู ูุฏุฑ.

๐ ุฏุฑ ASP.NET Coreุ ููฺฉูู ุงู ูุฏุฑ ุงุฒ ุทุฑู middleware ุงููุช ุชูุธู ุดุฏู ุจุงุดู:

```csharp
app.Use(async (context, next) =>
{
    context.Response.Headers.Add("Permissions-Policy", "lock-manager=()");
    await next.Invoke();
});
```

---

### ๐ธ `Content-Security-Policy (CSP)`

ุงู ูุฏุฑ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุญููุงุช XSSุ ุงุฌุฑุง ุงุณฺฉุฑูพุชโูุง ูุงุฎูุงุณุชูุ iframeูุงุ Web Workers ู... ุงุณุชูุงุฏู ูโุดู. ูู ุงฺฏุฑ **ุจุด ุงุฒ ุญุฏ ูุญุฏูุฏฺฉููุฏู** ุจุงุดูุ ููฺฉูู ฺฉุฏ ฺฉู ุงุฒ Web Locks ุงุณุชูุงุฏู ูโฺฉููุ **ุงุฌุฑุง ูุดู**.

ูุซุงู ูุญุฏูุฏฺฉููุฏู:

```http
Content-Security-Policy: default-src 'self'; script-src 'none';
```

โ๏ธ ุงู ุนู ูฺ ุงุณฺฉุฑูพุชุ ุญุช ุงุฒ ุฎูุฏ ุณุงุชุ ุงุฌุฑุง ููโุดู.

โ ูุณุฎูโุง ฺฉู ุงุฌุงุฒู ุงุณุชูุงุฏู ุงุฒ JS ุฏุงุฎู ุฑู ุจุฏู:

```http
Content-Security-Policy: default-src 'self'; script-src 'self';
```

---

### ๐ธ `Cross-Origin-Embedder-Policy`, `Cross-Origin-Opener-Policy`

ุงฺฏุฑ ุจูโุงุดุชุจุงู ุชูุธู ุจุดูุ ููฺฉูู ุจุงุนุซ ุจุดู ุจุฑุฎ APIูุง ูุซู Web Locksุ WebAssembly ุง SharedArrayBuffer ุงุฒ ฺฉุงุฑ ุจูุชู. ุจุดุชุฑ ุฑู ูพุฑูฺูโูุง ุจุง multithreading ุฏุฑ JS ุชุฃุซุฑ ุฏุงุฑูุ ูู ุฏุฑ ุชุฑฺฉุจ ุจุง CSP ุง sandbox ูู ููฺฉูู ุจุงุนุซ ุงุฎุชูุงู ุจุดู.

---

## โ ุฑุงูโุญูโูุง ุจุฑุง ุจุฑุฑุณ ุฏุฑ .NET:

1. ุจุฑุฑุณ ู ุญุฐู ุง ุงุตูุงุญ Headerูุง ุจุงูุง ุฏุฑ ุชูุธูุงุช middleware ุง `Startup.cs`.
2. ุจุฑุฑุณ ูุงู `web.config` ุง ุชูุธูุงุช reverse proxy (IIS/NGINX).
3. ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑูุง ูุซู [SecurityHeaders.com](https://securityheaders.com) ุจุฑุง ุชุญูู ูุฏุฑูุง HTTP ุณุงุช.

---

## โ ต. ูุญุฏูุฏุชโูุง ุงููุช ุณุงุฒูุงู (Proxy / Antivirus / Group Policy)

ุฏุฑ ูุญุทโูุง ุณุงุฒูุงูุ ููฺฉูู ุฑูุชุงุฑ ูุฑูุฑฺฏุฑูุง ุง ุชุฑุงูฺฉ HTTPS ุชูุณุท ุชูุธูุงุช ุงููุช **ฺฉูุชุฑู ุง ุชุบุฑ** ูพุฏุง ฺฉูู. ุงู ูุณุฆูู ูุฎุตูุตุงู ุฏุฑ ุดุจฺฉูโูุง ุงุฏุงุฑุ ุจุงูฺฉโูุงุ ุดุฑฺฉุชโูุง ุจุฒุฑฺฏ ู ูุญุทโูุง ุจุง **Group Policy Management** ุฏุฏู ูโุดู.

### ๐ ูููโุชุฑู ุนูุงูู:

---

### ๐ธ ต.ฑ. HTTPS Interception ุชูุณุท Proxy ุง ุขูุชโูุฑูุณ

ุฏุฑ ุงู ุญุงูุชุ ุงุจุฒุงุฑูุง ุงููุช ูุงููุฏ **Fortinet**, **Blue Coat**, **Zscaler**, **Kaspersky**, ุง **ESET** ุชุฑุงูฺฉ HTTPS ุฑู decrypt ู inspect ูโฺฉูู.

#### ุชุฃุซุฑ:

* ฺฏูุงู SSL ุณุงุช ุดูุง ุจุง ฺฉ **ฺฏูุงู ุฌุนู ูู ูุนุชุจุฑ ูุญู** ุฌุงฺฏุฒู ูโุดู.
* ูุฑูุฑฺฏุฑ ููฺฉูู ุฏุฑ ุชุดุฎุต origin ุฏฺุงุฑ ูุดฺฉู ุจุดู ุง ุตูุญู ุจู ุตูุฑุช secure context ูุดูุงุณู.
* ุฏุฑ ูุชุฌูุ Web Locks API ููฺฉูู ุบุฑูุนุงู ุจุดู.

๐ ุชุณุช: ุฏุฑ DevTools ุจุฎุด "Security" ฺฺฉ ฺฉู ฺฉู ุขุง ฺฏูุงู ูุงูุน ุฎูุฏุช ููุฏ ุดุฏู ุง ูู. ุงฺฏุฑ ูุซูุงู ููุดุชู ุดุฏู:

```
The certificate is issued by: Zscaler Root CA
```

ุนู HTTPS interception ูุนุงูู.

---

### ๐ธ ต.ฒ. ูุญุฏูุฏุณุงุฒ APIูุง ุฏุฑ Group Policy ุง Registry

ุฏุฑ ุจุนุถ ุดุจฺฉูโูุง ุณุงุฒูุงู:

* ุงุฒ **Group Policy Editor** (GPO) ุจุฑุง ุบุฑูุนุงูโฺฉุฑุฏู APIูุง ุฎุงุต ุงุณุชูุงุฏู ูโุดู.
* ูุซูุงู ูโุชููู ุงุฌุฑุง ุจุฑุฎ Web APIs (WebRTC, WebLocks, WebUSB) ุฑู ุบุฑูุนุงู ฺฉูู.

๐ ุชุณุช: ุจุงุฒ ฺฉุฑุฏู `about:policy` ุฏุฑ Chrome ุง `about:config` ุฏุฑ Firefox ู ุฌุณุชุฌู ููุงุฑุฏ ูุฑุชุจุท ุจุง security ุง feature policy.

---

### ๐ธ ต.ณ. ุชูุธูุงุช ุณุฎุชฺฏุฑุงูู ูุฑูุฑฺฏุฑ ุณุงุฒูุงู (Managed Browser)

ุจุฑุฎ ุดุฑฺฉุชโูุง ูุณุฎูโูุง enterprise ูุฑูุฑฺฏุฑ ุฑู ุจุง ูุญุฏูุฏุช ูุตุจ ูโฺฉูู:

* ูุญุฏูุฏุช ุฑู iframeูุงุ APIูุง ุฌุงูุงุงุณฺฉุฑูพุช ุง ุญุช ูพูุงฺฏูโูุง
* ุขูพุฏุชโูุจูุฏู ูุฑูุฑฺฏุฑ ฺฉู ุจุงุนุซ ูุดู Web Locks ุฏุฑ ุฏุณุชุฑุณ ุจุงุดู

๐ ุชุณุช: ฺฺฉ ฺฉุฑุฏู `chrome://policy` ุง `edge://policy` ุง ุงุฌุฑุง ูุฑูุฑฺฏุฑ portable ุฏุฑ ููุงู ุดุจฺฉู

---

## โ ุฑุงูโุญูโูุง ูพุดููุงุฏ ุจุฑุง ูุญุท ุณุงุฒูุงู:

1. ุจุฑุฑุณ DevTools ุจุฎุด `Security` ู `Console` ุจุฑุง ุงุฎุทุงุฑูุง ูุฑุจูุท ุจู "insecure context", "blocked by policy", ุง "lock-manager".
2. ุชุณุช ฺฉุฑุฏู ูพุฑูฺู ุฏุฑ ููุงู ุดุจฺฉู ุจุง:

   * ูุฑูุฑฺฏุฑ private
   * ูุฑูุฑฺฏุฑ portable (ูุซูุงู Firefox Portable)
   * ุง ุงุฒ ุทุฑู VPN/Hotspot ููุจุงู ุจุฑุง ุฎุงุฑุฌโุดุฏู ุงุฒ ูุญุท ูพุฑูฺฉุณ ุณุงุฒูุงู
3. ุฏุฑ ุตูุฑุช ุชุฃุฏ ุฏุฎุงูุช ูพุฑูฺฉุณ ุง ุขูุชโูุฑูุณ: ููุงููฺฏ ุจุง ุชู IT ุจุฑุง ุชุนุฑู ุงุณุชุซูุงุก ุฑู ุฏุงููู ุดูุง (trusted SSL passthrough)

---

ุงฺฏุฑ ุฎูุงุณุชุ ูโุชููู ู ฺฉุฏ ุณุงุฏู ุงุฒ ฺฉ ุตูุญู ุชุณุช Web Locks ุจุฑุงุช ุจุณุงุฒู ฺฉู ุฏุฑ ูุฑูุฑฺฏุฑ DevTools ุงุฌุฑุง ฺฉู ุชุง ุจุจู ุงุตูุงู Web Locks ฺฉุงุฑ ูโฺฉูู ุง ูู. ุจฺฏ ุฑู ฺู ุฏุงููู/ุณุฑูุฑ ุชุณุช ูโฺฉูุ ุฏููโุชุฑ ุฑุงูููุง ูโฺฉูู.




//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


ุณุคุงู ุฎู ุฎูุจ ูพุฑุณุฏ ู ูุดูู ูโุฏู ุฏูู ุฏุงุฑ ุฌูู ูุฑ. ุฌูุงุจ ุฑู ุจู ุฏู ุจุฎุด ุชูุณู ูโฺฉูู:

---

## ๐งฉ ุจุฎุด ุงูู: ุขุง ูุฏุฑูุง ูุญุฏูุฏฺฉููุฏู ููฺฉูู **ุจูโุทูุฑ ูพุดโูุฑุถ** ุงุนูุงู ุจุดูุ

### โ ุจููุ ููฺฉูู! ูุฎุตูุตุงู ุฏุฑ ูพุฑูฺูโูุง ASP.NET Core ุฌุฏุฏ (ูุซูุงู ุงุฒ .NET 6 ุจู ุจุนุฏ)ุ ุจุฑุฎ ูุฏุฑูุง ุงููุช ููฺฉูู ุจู ุดฺฉู ุฒุฑ ุจูโุตูุฑุช **ูพุดโูุฑุถ** ุฏุฑ ูุงูุจโูุง (templates)ุ reverse proxyูุง ุง ุญุช ูุงุณุชูฺฏโูุง ุงุจุฑ ุงุถุงูู ุจุดู:

---

### ๐น ูุซุงูโูุง ุงุฒ ูพุดโูุฑุถโูุง ุฑุงุฌ:

#### 1. **`Permissions-Policy` ุง `Feature-Policy`**

ุงู ูุฏุฑ ููฺฉูู ุจู ุทูุฑ ูพุดโูุฑุถ ุฏุฑ ูุงุณุชโูุง ูุซู Azure App Service ุง ุชูุธูุงุช IIS ุงููุช ุงุถุงูู ุดุฏู ุจุงุดู:

```http
Permissions-Policy: accelerometer=(), camera=(), microphone=(), geolocation=(), lock-manager=()
```

๐ด ุชูุฌู ฺฉู ฺฉู `lock-manager=()` ุนู ุฏุณุชุฑุณ ุจู Web Locks ูุทุน ุดุฏู.

#### 2. **`Content-Security-Policy (CSP)`**

ุจุนุถ ูุงูุจโูุง .NETุ ูุฎุตูุตุงู ุจุง Blazor ุง Razor Pagesุ ููฺฉูู CSP ุณุฎุชฺฏุฑุงูู ุฏุงุดุชู ุจุงุดู:

```http
Content-Security-Policy: default-src 'self'; script-src 'none';
```

---

### ๐ ฺุทูุฑ ุจูููู ุงุนูุงู ุดุฏู ุง ููุ

ฑ. DevTools ูุฑูุฑฺฏุฑ โ ุชุจ `Network`
ฒ. ุฏุฑุฎูุงุณุช `index.html` ุง root ุฑู ุจุงุฒ ฺฉู
ณ. ุชุจ `Headers` โ ุจุฎุด Response Headers
ด. ุฏูุจุงู ูุฏุฑูุง ูุซู:

* `Permissions-Policy`
* `Feature-Policy`
* `Content-Security-Policy`

---

## ๐งฉ ุจุฎุด ุฏูู: ุขุง ุงู ูุดฺฉู ููุท ุฏุฑ ูุญุท production ุธุงูุฑ ูโุดูุ ฺุฑุง ุฏุฑ ููฺฉุงู ูุณุชุ

### โ ุฏุฑ ุจุดุชุฑ ููุงุฑุฏุ ุจูู! ุงู ุชูุงูุช ุจู ฺูุฏ ุฏูู ุงุชูุงู ูโุงูุชู:

---

### ๐น ฑ. ุฏุฑ ูุญุท **local** ูุนูููุงู middlewareูุง ุงููุช ุบุฑูุนุงู ุง ุญุฏุงูู ูุณุชู

ุฏุฑ `Startup.cs` ุง `Program.cs` ููฺฉูู ุดุฑุท ฺฏุฐุงุดุชู ุจุงุด:

```csharp
if (!app.Environment.IsDevelopment())
{
    app.UseHsts();
    app.UseXXssProtection();
    app.Use(async (context, next) =>
    {
        context.Response.Headers.Add("Permissions-Policy", "...");
        await next();
    });
}
```

๐ ุนู ุงู ูุฏุฑูุง ููุท ุฏุฑ production ุงุนูุงู ูโุดู.

---

### ๐น ฒ. ุฏุฑ localhostุ ูุฑูุฑฺฏุฑูุง ุณุฎุชโฺฏุฑ ฺฉูุชุฑ ุฏุงุฑู

* Web Locks API ุฏุฑ **HTTP localhost** ูู ูุนุงู ูุณุชุ ูู ุฑู ุฏุงูููโูุง ูุงูุน ููุท ููุช HTTPS ุจุง ฺฏูุงู ูุนุชุจุฑ ุจุงุดู.
* CSP ู Permissions-Policy ุฏุฑ localhost ููฺฉูู ุชูุณุท ุฎูุฏุช ุชูุธู ูุดุฏู ุจุงุดู ู ุงุตูุงู ุงุฑุณุงู ูุดู.

---

### ๐น ณ. ุฏุฑ productionุ ุงุจุฒุงุฑูุง ูุซู CDN, WAF, Proxy ูู ููฺฉูู ูุฏุฑูุง ุงุถุงูู ฺฉูู

ูุซูุงู:

* Azure Front Door
* Cloudflare
* AWS CloudFront
* IIS reverse proxy

ููฺฉูู ุจุฏูู ุงุทูุงุน ุชูุ Headerูุง ุงููุช ุชุฒุฑู ฺฉูู.

---

## โ ุฑุงูโุญูโูุง:

### ๐ ุงูู ุจุฑุฑุณ ฺฉู ฺู Headerูุง ุงุฑุณุงู ูโุดู:

ุฏุฑ DevTools:

1. ุจุงุฒ ฺฉู `index.html` ุง ุงููู ูุงู JS ููุฏ ุดุฏู
2. ุฏุฑ ุชุจ **Headers > Response Headers**
3. ุจุจู ุขุง `Permissions-Policy`, `Content-Security-Policy`, `Feature-Policy` ุญุถูุฑ ุฏุงุฑู ุง ูู

---

### ๐ ุจุนุฏุ ุงฺฏู ูโุฎูุง ุงุฒุดูู ุฌููฺฏุฑ ฺฉู:

#### ุงฺฏุฑ ุงุฒ ASP.NET Core ุงุณุชูุงุฏู ูโฺฉู:

ุฏุฑ ูุงู `Startup.cs` ุง `Program.cs` ูุฏุฑูุง ุฑู ุง ุญุฐู ฺฉู ุง ุจุงุฒููุณ:

```csharp
app.Use(async (context, next) =>
{
    context.Response.Headers.Remove("Permissions-Policy");
    context.Response.Headers.Remove("Feature-Policy");
    context.Response.Headers.Remove("Content-Security-Policy");

    // ุง ูุณุฎู ุจุงุฒููุณโุดุฏู:
    context.Response.Headers["Permissions-Policy"] = "lock-manager=(self)";
    await next();
});
```

---

#### ุงฺฏุฑ ุงุฒ **IIS** ุงุณุชูุงุฏู ูโฺฉู:

ุฏุฑ `web.config` ุงู ุฑู ฺฺฉ ฺฉู ุง ุญุฐู ฺฉู:

```xml
<system.webServer>
  <httpProtocol>
    <customHeaders>
      <remove name="Permissions-Policy" />
      <remove name="Feature-Policy" />
      <remove name="Content-Security-Policy" />
    </customHeaders>
  </httpProtocol>
</system.webServer>
```

---

## โ ุฌูุนโุจูุฏ

| ููุฑุฏ                                      | ุฏุฑ ููฺฉุงู ูุณุชุ                | ุฏุฑ Production ูุณุชุ | ุงุซุฑ ุฑู Web Locks |
| ----------------------------------------- | ---------------------------- | ------------------ | ----------------- |
| `Permissions-Policy` ุจุง `lock-manager=()` | ูุนูููุงู ูู                   | ูุนูููุงู ุจูู        | ๐ซ ุบุฑ ูุนุงู       |
| `Content-Security-Policy` ุณุฎุชฺฏุฑุงูู       | ูุนูููุงู ูู                   | ฺฏุงู ุจูู           | โููฺฉูู ุงุฌุฑุง ูุดู   |
| Middlewareูุง ุงููุช                      | ููุท ุฏุฑ Production ูุนุงู ูโุดู | ุจูู                | ๐ ุจุงุนุซ ุงุฎุชูุงู    |
| CDN ุง Reverse Proxy                      | ูู                           | ุจูู                | ููฺฉูู ุชุฒุฑู ฺฉูู   |

---

ุงฺฏุฑ ุฎูุงุณุชุ ูโุชููู ู ุชุณุช ุขููุงู ุณุงุฏู ุจุง Web Locks ุจุณุงุฒู ฺฉู ุฑู ุณุฑูุฑ productionุช ุงุฌุฑุง ฺฉู ู ุจุฑุฑุณ ฺฉูู ุขุง `navigator.locks` ุฏุฑ ุฏุณุชุฑุณ ูุณุช ุง ูู. ููุท ฺฉุงูู ุจฺฏ ุฏุงููู ุง ุณุงุฎุชุงุฑ ูพุฑูฺู ฺุทูุฑู.

